import{j as l}from"./jsx-runtime-ffb262ed.js";import{a as E,u as Ee,c as W,e as Qe}from"./useEventCallback-59a76250.js";import{a as $,o as ve,s as _,u as Re,l as xe,c as Te,C as Ze,d as et,r as Ne,F as Ie,b as tt,t as nt}from"./createWithBsPrefix-3da136dd.js";import{r}from"./index-76fb7be0.js";import{R as ot}from"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";import"./inheritsLoose-c82a83d4.js";import"./index-8d47fad6.js";function rt(){return r.useState(null)}function st(){const e=r.useRef(!0),t=r.useRef(()=>e.current);return r.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function at(e){const t=r.useRef(null);return r.useEffect(()=>{t.current=e}),t.current}const it=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",lt=typeof document<"u",Se=lt||it?r.useLayoutEffect:r.useEffect;function ct(e){const t=r.useRef(e);return t.current=e,t}function _e(e){const t=ct(e);r.useEffect(()=>()=>t.current(),[])}var ut=Function.prototype.bind.call(Function.prototype.call,[].slice);function O(e,t){return ut(e.querySelectorAll(t))}function Oe(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const dt="data-rr-ui-";function ft(e){return`${dt}${e}`}const We=r.createContext($?window:void 0);We.Provider;function be(){return r.useContext(We)}var Z;function ke(e){if((!Z&&Z!==0||e)&&$){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Z=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Z}function he(e){e===void 0&&(e=ve());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function ht(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const je=ft("modal-open");class mt{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:o=!1}={}){this.handleContainerOverflow=n,this.isRTL=o,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return ht(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[o]:s.style[o]},t.scrollBarWidth&&(n[o]=`${parseInt(_(s,o)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(je,""),_(s,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(je),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const Me=mt,me=(e,t)=>$?e==null?(t||ve()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function gt(e,t){const n=be(),[o,s]=r.useState(()=>me(e,n==null?void 0:n.document));if(!o){const a=me(e);a&&s(a)}return r.useEffect(()=>{t&&o&&t(o)},[t,o]),r.useEffect(()=>{const a=me(e);a!==o&&s(a)},[e,o]),o}function pt({children:e,in:t,onExited:n,mountOnEnter:o,unmountOnExit:s}){const a=r.useRef(null),f=r.useRef(t),h=E(n);r.useEffect(()=>{t?f.current=!0:h(a.current)},[t,h]);const m=Re(a,e.ref),u=r.cloneElement(e,{ref:m});return t?u:s||!f.current&&o?null:u}function yt({in:e,onTransition:t}){const n=r.useRef(null),o=r.useRef(!0),s=E(t);return Se(()=>{if(!n.current)return;let a=!1;return s({in:e,element:n.current,initial:o.current,isStale:()=>a}),()=>{a=!0}},[e,s]),Se(()=>(o.current=!1,()=>{o.current=!0}),[]),n}function Et({children:e,in:t,onExited:n,onEntered:o,transition:s}){const[a,f]=r.useState(!t);t&&a&&f(!1);const h=yt({in:!!t,onTransition:u=>{const p=()=>{u.isStale()||(u.in?o==null||o(u.element,u.initial):(f(!0),n==null||n(u.element)))};Promise.resolve(s(u)).then(p,g=>{throw u.in||f(!0),g})}}),m=Re(h,e.ref);return a&&!t?null:r.cloneElement(e,{ref:m})}function Ae(e,t,n){return e?l.jsx(e,Object.assign({},n)):t?l.jsx(Et,Object.assign({},n,{transition:t})):l.jsx(pt,Object.assign({},n))}function vt(e){return e.code==="Escape"||e.keyCode===27}const Rt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Tt(e,t){if(e==null)return{};var n={},o=Object.keys(e),s,a;for(a=0;a<o.length;a++)s=o[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}let ge;function bt(e){return ge||(ge=new Me({ownerDocument:e==null?void 0:e.document})),ge}function Mt(e){const t=be(),n=e||bt(t),o=r.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>n.add(o.current),remove:()=>n.remove(o.current),isTopModal:()=>n.isTopModal(o.current),setDialogRef:r.useCallback(s=>{o.current.dialog=s},[]),setBackdropRef:r.useCallback(s=>{o.current.backdrop=s},[])})}const $e=r.forwardRef((e,t)=>{let{show:n=!1,role:o="dialog",className:s,style:a,children:f,backdrop:h=!0,keyboard:m=!0,onBackdropClick:u,onEscapeKeyDown:p,transition:g,runTransition:M,backdropTransition:ne,runBackdropTransition:H,autoFocus:oe=!0,enforceFocus:w=!0,restoreFocus:re=!0,restoreFocusOptions:se,renderDialog:K,renderBackdrop:ae=c=>l.jsx("div",Object.assign({},c)),manager:ie,container:le,onShow:j,onHide:U=()=>{},onExit:V,onExited:A,onExiting:G,onEnter:z,onEntering:P,onEntered:ce}=e,ue=Tt(e,Rt);const v=be(),C=gt(le),d=Mt(ie),q=st(),B=at(n),[T,R]=r.useState(!n),y=r.useRef(null);r.useImperativeHandle(t,()=>d,[d]),$&&!B&&n&&(y.current=he(v==null?void 0:v.document)),n&&T&&R(!1);const X=E(()=>{if(d.add(),N.current=xe(document,"keydown",fe),x.current=xe(document,"focus",()=>setTimeout(Y),!0),j&&j(),oe){var c,Q;const I=he((c=(Q=d.dialog)==null?void 0:Q.ownerDocument)!=null?c:v==null?void 0:v.document);d.dialog&&I&&!Oe(d.dialog,I)&&(y.current=I,d.dialog.focus())}}),D=E(()=>{if(d.remove(),N.current==null||N.current(),x.current==null||x.current(),re){var c;(c=y.current)==null||c.focus==null||c.focus(se),y.current=null}});r.useEffect(()=>{!n||!C||X()},[n,C,X]),r.useEffect(()=>{T&&D()},[T,D]),_e(()=>{D()});const Y=E(()=>{if(!w||!q()||!d.isTopModal())return;const c=he(v==null?void 0:v.document);d.dialog&&c&&!Oe(d.dialog,c)&&d.dialog.focus()}),de=E(c=>{c.target===c.currentTarget&&(u==null||u(c),h===!0&&U())}),fe=E(c=>{m&&vt(c)&&d.isTopModal()&&(p==null||p(c),c.defaultPrevented||U())}),x=r.useRef(),N=r.useRef(),F=(...c)=>{R(!0),A==null||A(...c)};if(!C)return null;const J=Object.assign({role:o,ref:d.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},ue,{style:a,className:s,tabIndex:-1});let L=K?K(J):l.jsx("div",Object.assign({},J,{children:r.cloneElement(f,{role:"document"})}));L=Ae(g,M,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:V,onExiting:G,onExited:F,onEnter:z,onEntering:P,onEntered:ce,children:L});let b=null;return h&&(b=ae({ref:d.setBackdropRef,onClick:de}),b=Ae(ne,H,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:b})),l.jsx(l.Fragment,{children:ot.createPortal(l.jsxs(l.Fragment,{children:[b,L]}),C)})});$e.displayName="Modal";const wt=Object.assign($e,{Manager:Me});function Ct(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function xt(e,t){e.classList?e.classList.add(t):Ct(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Be(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Nt(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Be(e.className,t):e.setAttribute("class",Be(e.className&&e.className.baseVal||"",t))}const k={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class St extends Me{adjustAndStore(t,n,o){const s=n.style[t];n.dataset[t]=s,_(n,{[t]:`${parseFloat(_(n,t))+o}px`})}restore(t,n){const o=n.dataset[t];o!==void 0&&(delete n.dataset[t],_(n,{[t]:o}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(xt(n,"modal-open"),!t.scrollBarWidth)return;const o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";O(n,k.FIXED_CONTENT).forEach(a=>this.adjustAndStore(o,a,t.scrollBarWidth)),O(n,k.STICKY_CONTENT).forEach(a=>this.adjustAndStore(s,a,-t.scrollBarWidth)),O(n,k.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(s,a,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();Nt(n,"modal-open");const o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";O(n,k.FIXED_CONTENT).forEach(a=>this.restore(o,a)),O(n,k.STICKY_CONTENT).forEach(a=>this.restore(s,a)),O(n,k.NAVBAR_TOGGLER).forEach(a=>this.restore(s,a))}}let pe;function Ot(e){return pe||(pe=new St(e)),pe}const kt=Te("modal-body"),jt=r.createContext({onHide(){}}),He=jt,Ke=r.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:o,size:s,fullscreen:a,children:f,scrollable:h,...m},u)=>{e=Ee(e,"modal");const p=`${e}-dialog`,g=typeof a=="string"?`${e}-fullscreen-${a}`:`${e}-fullscreen`;return l.jsx("div",{...m,ref:u,className:W(p,t,s&&`${e}-${s}`,o&&`${p}-centered`,h&&`${p}-scrollable`,a&&g),children:l.jsx("div",{className:W(`${e}-content`,n),children:f})})});Ke.displayName="ModalDialog";const Ue=Ke,At=Te("modal-footer"),Bt=r.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:o,children:s,...a},f)=>{const h=r.useContext(He),m=E(()=>{h==null||h.onHide(),o==null||o()});return l.jsxs("div",{ref:f,...a,children:[s,n&&l.jsx(Ze,{"aria-label":e,variant:t,onClick:m})]})}),Dt=Bt,Ve=r.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:o=!1,...s},a)=>(e=Ee(e,"modal-header"),l.jsx(Dt,{ref:a,...s,className:W(t,e),closeLabel:n,closeButton:o})));Ve.displayName="ModalHeader";const Ft=Ve,Lt=et("h4"),It=Te("modal-title",{Component:Lt});function _t(e){return l.jsx(Ie,{...e,timeout:null})}function Wt(e){return l.jsx(Ie,{...e,timeout:null})}const Ge=r.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:o,contentClassName:s,children:a,dialogAs:f=Ue,"aria-labelledby":h,"aria-describedby":m,"aria-label":u,show:p=!1,animation:g=!0,backdrop:M=!0,keyboard:ne=!0,onEscapeKeyDown:H,onShow:oe,onHide:w,container:re,autoFocus:se=!0,enforceFocus:K=!0,restoreFocus:ae=!0,restoreFocusOptions:ie,onEntered:le,onExit:j,onExiting:U,onEnter:V,onEntering:A,onExited:G,backdropClassName:z,manager:P,...ce},ue)=>{const[v,C]=r.useState({}),[d,q]=r.useState(!1),B=r.useRef(!1),T=r.useRef(!1),R=r.useRef(null),[y,X]=rt(),D=Re(ue,X),Y=E(w),de=Qe();e=Ee(e,"modal");const fe=r.useMemo(()=>({onHide:Y}),[Y]);function x(){return P||Ot({isRTL:de})}function N(i){if(!$)return;const S=x().getScrollbarWidth()>0,Ce=i.scrollHeight>ve(i).documentElement.clientHeight;C({paddingRight:S&&!Ce?ke():void 0,paddingLeft:!S&&Ce?ke():void 0})}const F=E(()=>{y&&N(y.dialog)});_e(()=>{Ne(window,"resize",F),R.current==null||R.current()});const J=()=>{B.current=!0},L=i=>{B.current&&y&&i.target===y.dialog&&(T.current=!0),B.current=!1},b=()=>{q(!0),R.current=nt(y.dialog,()=>{q(!1)})},c=i=>{i.target===i.currentTarget&&b()},Q=i=>{if(M==="static"){c(i);return}if(T.current||i.target!==i.currentTarget){T.current=!1;return}w==null||w()},I=i=>{ne?H==null||H(i):(i.preventDefault(),M==="static"&&b())},ze=(i,S)=>{i&&N(i),V==null||V(i,S)},Pe=i=>{R.current==null||R.current(),j==null||j(i)},qe=(i,S)=>{A==null||A(i,S),tt(window,"resize",F)},Xe=i=>{i&&(i.style.display=""),G==null||G(i),Ne(window,"resize",F)},Ye=r.useCallback(i=>l.jsx("div",{...i,className:W(`${e}-backdrop`,z,!g&&"show")}),[g,z,e]),we={...n,...v};we.display="block";const Je=i=>l.jsx("div",{role:"dialog",...i,style:we,className:W(t,e,d&&`${e}-static`,!g&&"show"),onClick:M?Q:void 0,onMouseUp:L,"aria-label":u,"aria-labelledby":h,"aria-describedby":m,children:l.jsx(f,{...ce,onMouseDown:J,className:o,contentClassName:s,children:a})});return l.jsx(He.Provider,{value:fe,children:l.jsx(wt,{show:p,ref:D,backdrop:M,container:re,keyboard:!0,autoFocus:se,enforceFocus:K,restoreFocus:ae,restoreFocusOptions:ie,onEscapeKeyDown:I,onShow:oe,onHide:w,onEnter:ze,onEntering:qe,onEntered:le,onExit:Pe,onExiting:U,onExited:Xe,manager:x(),transition:g?_t:void 0,backdropTransition:g?Wt:void 0,renderBackdrop:Ye,renderDialog:Je})})});Ge.displayName="Modal";const ee=Object.assign(Ge,{Body:kt,Header:Ft,Title:It,Footer:At,Dialog:Ue,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function ye({header:e,footer:t,children:n,...o}){return l.jsxs(ee,{animation:!0,scrollable:!0,centered:!0,...o,children:[e&&l.jsx(ee.Header,{closeButton:!0,children:e}),l.jsx(ee.Body,{children:n}),t&&l.jsx(ee.Footer,{children:t})]})}try{ye.displayName="Popup",ye.__docgenInfo={description:"",displayName:"Popup",props:{header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"any"}},footer:{defaultValue:null,description:"",name:"footer",required:!1,type:{name:"any"}}}}}catch{}const Xt={title:"Components/Popup",component:$t,tags:["autodocs"],argTypes:{}},te={args:{show:!1,header:"タイトル",footer:"フッター",children:"子要素"}};function $t({show:e,...t}){const[n,o]=r.useState(e);r.useEffect(()=>{o(e)},[e]);function s(){o(!n)}return l.jsx(ye,{show:n,onHide:s,...t})}var De,Fe,Le;te.parameters={...te.parameters,docs:{...(De=te.parameters)==null?void 0:De.docs,source:{originalSource:`{
  args: {
    show: false,
    header: 'タイトル',
    footer: 'フッター',
    children: '子要素'
  }
}`,...(Le=(Fe=te.parameters)==null?void 0:Fe.docs)==null?void 0:Le.source}}};const Yt=["Normal"];export{te as Normal,Yt as __namedExportsOrder,Xt as default};
//# sourceMappingURL=Popup.stories-eb3d0843.js.map
