import{j as d}from"./jsx-runtime-ffb262ed.js";import{a as y,u as pe,c as W,b as qe}from"./useEventCallback-d2764a24.js";import{c as ye,o as Be,s as I,l as Re,a as ve,C as Xe,d as Ye,u as Je,r as we,F as je,b as Qe,t as Ze}from"./createWithBsPrefix-8bad15b1.js";import{u as Fe,a as et,b as tt,c as be,d as De,i as ot,r as Ce,h as nt,e as rt}from"./hasClass-f82e4ba1.js";import{r as s}from"./index-76fb7be0.js";import{R as at}from"./index-d3ea75b5.js";import"./_commonjsHelpers-de833af9.js";import"./inheritsLoose-c82a83d4.js";import"./index-8d47fad6.js";function st(t){const e=s.useRef(null);return s.useEffect(()=>{e.current=t}),e.current}var it=Function.prototype.bind.call(Function.prototype.call,[].slice);function S(t,e){return it(t.querySelectorAll(e))}const lt="data-rr-ui-";function dt(t){return`${lt}${t}`}var Q;function xe(t){if((!Q&&Q!==0||t)&&ye){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Q=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Q}function fe(t){t===void 0&&(t=Be());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function ct(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const Ne=dt("modal-open");class ut{constructor({ownerDocument:e,handleContainerOverflow:o=!0,isRTL:n=!1}={}){this.handleContainerOverflow=o,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return ct(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const o={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(o[n]=`${parseInt(I(r,n)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Ne,""),I(r,o)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const o=this.getElement();o.removeAttribute(Ne),Object.assign(o.style,e.style)}add(e){let o=this.modals.indexOf(e);return o!==-1||(o=this.modals.length,this.modals.push(e),this.setModalAttributes(e),o!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),o}remove(e){const o=this.modals.indexOf(e);o!==-1&&(this.modals.splice(o,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Ee=ut,ft=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function ht(t,e){if(t==null)return{};var o={},n=Object.keys(t),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(o[r]=t[r]);return o}let he;function mt(t){return he||(he=new Ee({ownerDocument:t==null?void 0:t.document})),he}function gt(t){const e=Fe(),o=t||mt(e),n=s.useRef({dialog:null,backdrop:null});return Object.assign(n.current,{add:()=>o.add(n.current),remove:()=>o.remove(n.current),isTopModal:()=>o.isTopModal(n.current),setDialogRef:s.useCallback(r=>{n.current.dialog=r},[]),setBackdropRef:s.useCallback(r=>{n.current.backdrop=r},[])})}const Le=s.forwardRef((t,e)=>{let{show:o=!1,role:n="dialog",className:r,style:i,children:v,backdrop:f=!0,keyboard:E=!0,onBackdropClick:R,onEscapeKeyDown:m,transition:h,runTransition:w,backdropTransition:te,runBackdropTransition:$,autoFocus:oe=!0,enforceFocus:b=!0,restoreFocus:ne=!0,restoreFocusOptions:re,renderDialog:H,renderBackdrop:ae=l=>d.jsx("div",Object.assign({},l)),manager:se,container:ie,onShow:A,onHide:K=()=>{},onExit:U,onExited:B,onExiting:P,onEnter:V,onEntering:G,onEntered:le}=t,de=ht(t,ft);const g=Fe(),C=et(ie),c=gt(se),z=tt(),j=st(o),[M,p]=s.useState(!o),u=s.useRef(null);s.useImperativeHandle(e,()=>c,[c]),ye&&!j&&o&&(u.current=fe(g==null?void 0:g.document)),o&&M&&p(!1);const q=y(()=>{if(c.add(),N.current=Re(document,"keydown",ue),x.current=Re(document,"focus",()=>setTimeout(X),!0),A&&A(),oe){var l,J;const _=fe((l=(J=c.dialog)==null?void 0:J.ownerDocument)!=null?l:g==null?void 0:g.document);c.dialog&&_&&!be(c.dialog,_)&&(u.current=_,c.dialog.focus())}}),F=y(()=>{if(c.remove(),N.current==null||N.current(),x.current==null||x.current(),ne){var l;(l=u.current)==null||l.focus==null||l.focus(re),u.current=null}});s.useEffect(()=>{!o||!C||q()},[o,C,q]),s.useEffect(()=>{M&&F()},[M,F]),De(()=>{F()});const X=y(()=>{if(!b||!z()||!c.isTopModal())return;const l=fe(g==null?void 0:g.document);c.dialog&&l&&!be(c.dialog,l)&&c.dialog.focus()}),ce=y(l=>{l.target===l.currentTarget&&(R==null||R(l),f===!0&&K())}),ue=y(l=>{E&&ot(l)&&c.isTopModal()&&(m==null||m(l),l.defaultPrevented||K())}),x=s.useRef(),N=s.useRef(),D=(...l)=>{p(!0),B==null||B(...l)};if(!C)return null;const Y=Object.assign({role:n,ref:c.setDialogRef,"aria-modal":n==="dialog"?!0:void 0},de,{style:i,className:r,tabIndex:-1});let L=H?H(Y):d.jsx("div",Object.assign({},Y,{children:s.cloneElement(v,{role:"document"})}));L=Ce(h,w,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!o,onExit:U,onExiting:P,onExited:D,onEnter:V,onEntering:G,onEntered:le,children:L});let T=null;return f&&(T=ae({ref:c.setBackdropRef,onClick:ce}),T=Ce(te,$,{in:!!o,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:T})),d.jsx(d.Fragment,{children:at.createPortal(d.jsxs(d.Fragment,{children:[T,L]}),C)})});Le.displayName="Modal";const pt=Object.assign(Le,{Manager:Ee});function yt(t,e){t.classList?t.classList.add(e):nt(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function ke(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function vt(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=ke(t.className,e):t.setAttribute("class",ke(t.className&&t.className.baseVal||"",e))}const O={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Et extends Ee{adjustAndStore(e,o,n){const r=o.style[e];o.dataset[e]=r,I(o,{[e]:`${parseFloat(I(o,e))+n}px`})}restore(e,o){const n=o.dataset[e];n!==void 0&&(delete o.dataset[e],I(o,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const o=this.getElement();if(yt(o,"modal-open"),!e.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";S(o,O.FIXED_CONTENT).forEach(i=>this.adjustAndStore(n,i,e.scrollBarWidth)),S(o,O.STICKY_CONTENT).forEach(i=>this.adjustAndStore(r,i,-e.scrollBarWidth)),S(o,O.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(r,i,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const o=this.getElement();vt(o,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";S(o,O.FIXED_CONTENT).forEach(i=>this.restore(n,i)),S(o,O.STICKY_CONTENT).forEach(i=>this.restore(r,i)),S(o,O.NAVBAR_TOGGLER).forEach(i=>this.restore(r,i))}}let me;function Mt(t){return me||(me=new Et(t)),me}const Tt=ve("modal-body"),Rt=s.createContext({onHide(){}}),_e=Rt,Ie=s.forwardRef(({bsPrefix:t,className:e,contentClassName:o,centered:n,size:r,fullscreen:i,children:v,scrollable:f,...E},R)=>{t=pe(t,"modal");const m=`${t}-dialog`,h=typeof i=="string"?`${t}-fullscreen-${i}`:`${t}-fullscreen`;return d.jsx("div",{...E,ref:R,className:W(m,e,r&&`${t}-${r}`,n&&`${m}-centered`,f&&`${m}-scrollable`,i&&h),children:d.jsx("div",{className:W(`${t}-content`,o),children:v})})});Ie.displayName="ModalDialog";const We=Ie,wt=ve("modal-footer"),bt=s.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:o=!1,onHide:n,children:r,...i},v)=>{const f=s.useContext(_e),E=y(()=>{f==null||f.onHide(),n==null||n()});return d.jsxs("div",{ref:v,...i,children:[r,o&&d.jsx(Xe,{"aria-label":t,variant:e,onClick:E})]})}),Ct=bt,$e=s.forwardRef(({bsPrefix:t,className:e,closeLabel:o="Close",closeButton:n=!1,...r},i)=>(t=pe(t,"modal-header"),d.jsx(Ct,{ref:i,...r,className:W(e,t),closeLabel:o,closeButton:n})));$e.displayName="ModalHeader";const xt=$e,Nt=Ye("h4"),kt=ve("modal-title",{Component:Nt});function St(t){return d.jsx(je,{...t,timeout:null})}function Ot(t){return d.jsx(je,{...t,timeout:null})}const He=s.forwardRef(({bsPrefix:t,className:e,style:o,dialogClassName:n,contentClassName:r,children:i,dialogAs:v=We,"aria-labelledby":f,"aria-describedby":E,"aria-label":R,show:m=!1,animation:h=!0,backdrop:w=!0,keyboard:te=!0,onEscapeKeyDown:$,onShow:oe,onHide:b,container:ne,autoFocus:re=!0,enforceFocus:H=!0,restoreFocus:ae=!0,restoreFocusOptions:se,onEntered:ie,onExit:A,onExiting:K,onEnter:U,onEntering:B,onExited:P,backdropClassName:V,manager:G,...le},de)=>{const[g,C]=s.useState({}),[c,z]=s.useState(!1),j=s.useRef(!1),M=s.useRef(!1),p=s.useRef(null),[u,q]=rt(),F=Je(de,q),X=y(b),ce=qe();t=pe(t,"modal");const ue=s.useMemo(()=>({onHide:X}),[X]);function x(){return G||Mt({isRTL:ce})}function N(a){if(!ye)return;const k=x().getScrollbarWidth()>0,Te=a.scrollHeight>Be(a).documentElement.clientHeight;C({paddingRight:k&&!Te?xe():void 0,paddingLeft:!k&&Te?xe():void 0})}const D=y(()=>{u&&N(u.dialog)});De(()=>{we(window,"resize",D),p.current==null||p.current()});const Y=()=>{j.current=!0},L=a=>{j.current&&u&&a.target===u.dialog&&(M.current=!0),j.current=!1},T=()=>{z(!0),p.current=Ze(u.dialog,()=>{z(!1)})},l=a=>{a.target===a.currentTarget&&T()},J=a=>{if(w==="static"){l(a);return}if(M.current||a.target!==a.currentTarget){M.current=!1;return}b==null||b()},_=a=>{te?$==null||$(a):(a.preventDefault(),w==="static"&&T())},Ke=(a,k)=>{a&&N(a),U==null||U(a,k)},Ue=a=>{p.current==null||p.current(),A==null||A(a)},Pe=(a,k)=>{B==null||B(a,k),Qe(window,"resize",D)},Ve=a=>{a&&(a.style.display=""),P==null||P(a),we(window,"resize",D)},Ge=s.useCallback(a=>d.jsx("div",{...a,className:W(`${t}-backdrop`,V,!h&&"show")}),[h,V,t]),Me={...o,...g};Me.display="block";const ze=a=>d.jsx("div",{role:"dialog",...a,style:Me,className:W(e,t,c&&`${t}-static`,!h&&"show"),onClick:w?J:void 0,onMouseUp:L,"aria-label":R,"aria-labelledby":f,"aria-describedby":E,children:d.jsx(v,{...le,onMouseDown:Y,className:n,contentClassName:r,children:i})});return d.jsx(_e.Provider,{value:ue,children:d.jsx(pt,{show:m,ref:F,backdrop:w,container:ne,keyboard:!0,autoFocus:re,enforceFocus:H,restoreFocus:ae,restoreFocusOptions:se,onEscapeKeyDown:_,onShow:oe,onHide:b,onEnter:Ke,onEntering:Pe,onEntered:ie,onExit:Ue,onExiting:K,onExited:Ve,manager:x(),transition:h?St:void 0,backdropTransition:h?Ot:void 0,renderBackdrop:Ge,renderDialog:ze})})});He.displayName="Modal";const Z=Object.assign(He,{Body:Tt,Header:xt,Title:kt,Footer:wt,Dialog:We,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function ge({header:t,footer:e,children:o,...n}){return d.jsxs(Z,{animation:!0,scrollable:!0,centered:!0,...n,children:[t&&d.jsx(Z.Header,{closeButton:!0,children:t}),d.jsx(Z.Body,{children:o}),e&&d.jsx(Z.Footer,{children:e})]})}try{ge.displayName="Popup",ge.__docgenInfo={description:"",displayName:"Popup",props:{header:{defaultValue:null,description:"",name:"header",required:!1,type:{name:"any"}},footer:{defaultValue:null,description:"",name:"footer",required:!1,type:{name:"any"}}}}}catch{}const Ht={title:"Components/Popup",component:At,tags:["autodocs"],argTypes:{}},ee={args:{show:!1,header:"タイトル",footer:"フッター",children:"子要素"}};function At({show:t,...e}){const[o,n]=s.useState(t);s.useEffect(()=>{n(t)},[t]);function r(){n(!o)}return d.jsx(ge,{show:o,onHide:r,...e})}var Se,Oe,Ae;ee.parameters={...ee.parameters,docs:{...(Se=ee.parameters)==null?void 0:Se.docs,source:{originalSource:`{
  args: {
    show: false,
    header: 'タイトル',
    footer: 'フッター',
    children: '子要素'
  }
}`,...(Ae=(Oe=ee.parameters)==null?void 0:Oe.docs)==null?void 0:Ae.source}}};const Kt=["Normal"];export{ee as Normal,Kt as __namedExportsOrder,Ht as default};
//# sourceMappingURL=Popup.stories-dcb50ed5.js.map
